(function(a9,aK){var aR="none",aq="LoadedContent",a8=false,aP="resize.",aW="y",aU="auto",a6=true,ar="nofollow",aY="x";function a5(b,d){b=b?' id="'+a2+b+'"':"";d=d?' style="'+d+'"':"";return a9("<div"+b+d+"/>")}function aV(d,c){c=c===aY?aX.width():aX.height();return typeof d==="string"?Math.round(/%/.test(d)?c/100*parseInt(d,10):parseInt(d,10)):d}function ai(a){return ba.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function aI(b){for(var d in b){if(a9.isFunction(b[d])&&d.substring(0,2)!=="on"){b[d]=b[d].call(aZ)}}b.rel=b.rel||aZ.rel||ar;b.href=b.href||a9(aZ).attr("href");b.title=b.title||aZ.title;return b}function aO(d,b){b&&b.call(aZ);a9.event.trigger(d)}function aH(){var a,h=a2+"Slideshow_",i="click."+a2,g,d;if(ba.slideshow&&a3[1]){g=function(){ay.text(ba.slideshowStop).unbind(i).bind(ah,function(){if(a4<a3.length-1||ba.loop){a=setTimeout(a7.next,ba.slideshowSpeed)}}).bind(ag,function(){clearTimeout(a)}).one(i+" "+ap,d);a1.removeClass(h+"off").addClass(h+"on");a=setTimeout(a7.next,ba.slideshowSpeed)};d=function(){clearTimeout(a);ay.text(ba.slideshowStart).unbind([ah,ag,ap,i].join(" ")).one(i,g);a1.removeClass(h+"on").addClass(h+"off")};ba.slideshowAuto?g():d()}}function aF(b){if(!ao){aZ=b;ba=aI(a9.extend({},a9.data(aZ,aT)));a3=a9(aZ);a4=0;if(ba.rel!==ar){a3=a9("."+ax).filter(function(){return(a9.data(this,aT).rel||this.rel)===ba.rel});a4=a3.index(aZ);if(a4===-1){a3=a3.add(aZ);a4=a3.length-1}}if(!aQ){aQ=aA=a6;a1.show();if(ba.returnFocus){try{aZ.blur();a9(aZ).one(aa,function(){try{this.focus()}catch(c){}})}catch(a){}}aN.css({opacity:+ba.opacity,cursor:ba.overlayClose?"pointer":aU}).show();ba.w=aV(ba.initialWidth,aY);ba.h=aV(ba.initialHeight,aW);a7.position(0);af&&aX.bind(aP+an+" scroll."+an,function(){aN.css({width:aX.width(),height:aX.height(),top:aX.scrollTop(),left:aX.scrollLeft()})}).trigger("scroll."+an);aO(aJ,ba.onOpen);ae.add(aw).add(av).add(ay).add(ad).hide();aD.html(ba.close).show()}a7.load(a6)}}var aG={transition:"elastic",speed:300,width:a8,initialWidth:"600",innerWidth:a8,maxWidth:a8,height:a8,initialHeight:"450",innerHeight:a8,maxHeight:a8,scalePhotos:a6,scrolling:a6,inline:a8,html:a8,iframe:a8,photo:a8,href:a8,title:a8,rel:a8,opacity:0.9,preloading:a6,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:a8,returnFocus:a6,loop:a6,slideshow:a8,slideshowAuto:a6,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:a8,onLoad:a8,onComplete:a8,onCleanup:a8,onClosed:a8,overlayClose:a6,escKey:a6,arrowKey:a6},aT="colorbox",a2="cbox",aJ=a2+"_open",ag=a2+"_load",ah=a2+"_complete",ap=a2+"_cleanup",aa=a2+"_closed",am=a2+"_purge",ac=a2+"_loaded",az=a9.browser.msie&&!a9.support.opacity,af=az&&a9.browser.version<7,an=a2+"_IE6",aN,a1,aE,aS,bc,aj,al,ak,a3,aX,a0,au,at,ad,ae,ay,av,aw,aD,aC,aB,aM,aL,aZ,a4,ba,aQ,aA,ao=a8,a7,ax=a2+"Element";a7=a9.fn[aT]=a9[aT]=function(h,e){var b=this,g;if(!b[0]&&b.selector){return b}h=h||{};if(e){h.onComplete=e}if(!b[0]||b.selector===undefined){b=a9("<a/>");h.open=a6}b.each(function(){a9.data(this,aT,a9.extend({},a9.data(this,aT)||aG,h));a9(this).addClass(ax)});g=h.open;if(a9.isFunction(g)){g=g.call(b)}g&&aF(b[0]);return b};a7.init=function(){var b="hover",a="clear:left";aX=a9(aK);a1=a5().attr({id:aT,"class":az?a2+"IE":""});aN=a5("Overlay",af?"position:absolute":"").hide();aE=a5("Wrapper");aS=a5("Content").append(a0=a5(aq,"width:0; height:0; overflow:hidden"),at=a5("LoadingOverlay").add(a5("LoadingGraphic")),ad=a5("Title"),ae=a5("Current"),av=a5("Next"),aw=a5("Previous"),ay=a5("Slideshow").bind(aJ,aH),aD=a5("Close"));aE.append(a5().append(a5("TopLeft"),bc=a5("TopCenter"),a5("TopRight")),a5(a8,a).append(aj=a5("MiddleLeft"),aS,al=a5("MiddleRight")),a5(a8,a).append(a5("BottomLeft"),ak=a5("BottomCenter"),a5("BottomRight"))).children().children().css({"float":"left"});au=a5(a8,"position:absolute; width:9999px; visibility:hidden; display:none");a9("body").prepend(aN,a1.append(aE,au));aS.children().hover(function(){a9(this).addClass(b)},function(){a9(this).removeClass(b)}).addClass(b);aC=bc.height()+ak.height()+aS.outerHeight(a6)-aS.height();aB=aj.width()+al.width()+aS.outerWidth(a6)-aS.width();aM=a0.outerHeight(a6);aL=a0.outerWidth(a6);a1.css({"padding-bottom":aC,"padding-right":aB}).hide();av.click(a7.next);aw.click(a7.prev);aD.click(a7.close);aS.children().removeClass(b);a9("."+ax).live("click",function(c){if(!(c.button!==0&&typeof c.button!=="undefined"||c.ctrlKey||c.shiftKey||c.altKey)){c.preventDefault();aF(this)}});aN.click(function(){ba.overlayClose&&a7.close()});a9(document).bind("keydown",function(c){if(aQ&&ba.escKey&&c.keyCode===27){c.preventDefault();a7.close()}if(aQ&&ba.arrowKey&&!aA&&a3[1]){if(c.keyCode===37&&(a4||ba.loop)){c.preventDefault();aw.click()}else{if(c.keyCode===39&&(a4<a3.length-1||ba.loop)){c.preventDefault();av.click()}}}})};a7.remove=function(){a1.add(aN).remove();a9("."+ax).die("click").removeData(aT).removeClass(ax)};a7.position=function(j,l){function a(b){bc[0].style.width=ak[0].style.width=aS[0].style.width=b.style.width;at[0].style.height=at[1].style.height=aS[0].style.height=aj[0].style.height=al[0].style.height=b.style.height}var k,c=Math.max(document.documentElement.clientHeight-ba.h-aM-aC,0)/2+aX.scrollTop(),i=Math.max(aX.width()-ba.w-aL-aB,0)/2+aX.scrollLeft();k=a1.width()===ba.w+aL&&a1.height()===ba.h+aM?0:j;aE[0].style.width=aE[0].style.height="9999px";a1.dequeue().animate({width:ba.w+aL,height:ba.h+aM,top:c,left:i},{duration:k,complete:function(){a(this);aA=a8;aE[0].style.width=ba.w+aL+aB+"px";aE[0].style.height=ba.h+aM+aC+"px";l&&l()},step:function(){a(this)}})};a7.resize=function(a){if(aQ){a=a||{};if(a.width){ba.w=aV(a.width,aY)-aL-aB}if(a.innerWidth){ba.w=aV(a.innerWidth,aY)}a0.css({width:ba.w});if(a.height){ba.h=aV(a.height,aW)-aM-aC}if(a.innerHeight){ba.h=aV(a.innerHeight,aW)}if(!a.innerHeight&&!a.height){a=a0.wrapInner("<div style='overflow:auto'></div>").children();ba.h=a.height();a.replaceWith(a.children())}a0.css({height:ba.h});a7.position(ba.transition===aR?0:ba.speed)}};a7.prep=function(a){var g="hidden";function b(i){var n,k,e,o,h=a3.length,j=ba.loop;a7.position(i,function(){function c(){az&&a1[0].style.removeAttribute("filter")}if(aQ){az&&f&&a0.fadeIn(100);a0.show();aO(ac);ad.show().html(ba.title);if(h>1){typeof ba.current==="string"&&ae.html(ba.current.replace(/\{current\}/,a4+1).replace(/\{total\}/,h)).show();av[j||a4<h-1?"show":"hide"]().html(ba.next);aw[j||a4?"show":"hide"]().html(ba.previous);n=a4?a3[a4-1]:a3[h-1];e=a4<h-1?a3[a4+1]:a3[0];ba.slideshow&&ay.show();if(ba.preloading){o=a9.data(e,aT).href||e.href;k=a9.data(n,aT).href||n.href;o=a9.isFunction(o)?o.call(e):o;k=a9.isFunction(k)?k.call(n):k;if(ai(o)){a9("<img/>")[0].src=o}if(ai(k)){a9("<img/>")[0].src=k}}}at.hide();ba.transition==="fade"?a1.fadeTo(d,1,function(){c()}):c();aX.bind(aP+a2,function(){a7.position(0)});aO(ah,ba.onComplete)}})}if(aQ){var f,d=ba.transition===aR?0:ba.speed;aX.unbind(aP+a2);a0.remove();a0=a5(aq).html(a);a0.hide().appendTo(au.show()).css({width:function(){ba.w=ba.w||a0.width();ba.w=ba.mw&&ba.mw<ba.w?ba.mw:ba.w;return ba.w}(),overflow:ba.scrolling?aU:g}).css({height:function(){ba.h=ba.h||a0.height();ba.h=ba.mh&&ba.mh<ba.h?ba.mh:ba.h;return ba.h}()}).prependTo(aS);au.hide();a9("#"+a2+"Photo").css({cssFloat:aR,marginLeft:aU,marginRight:aU});af&&a9("select").not(a1.find("select")).filter(function(){return this.style.visibility!==g}).css({visibility:g}).one(ap,function(){this.style.visibility="inherit"});ba.transition==="fade"?a1.fadeTo(d,0,function(){b(0)}):b(d)}};a7.load=function(a){var f,e,b,d=a7.prep;aA=a6;aZ=a3[a4];a||(ba=aI(a9.extend({},a9.data(aZ,aT))));aO(am);aO(ag,ba.onLoad);ba.h=ba.height?aV(ba.height,aW)-aM-aC:ba.innerHeight&&aV(ba.innerHeight,aW);ba.w=ba.width?aV(ba.width,aY)-aL-aB:ba.innerWidth&&aV(ba.innerWidth,aY);ba.mw=ba.w;ba.mh=ba.h;if(ba.maxWidth){ba.mw=aV(ba.maxWidth,aY)-aL-aB;ba.mw=ba.w&&ba.w<ba.mw?ba.w:ba.mw}if(ba.maxHeight){ba.mh=aV(ba.maxHeight,aW)-aM-aC;ba.mh=ba.h&&ba.h<ba.mh?ba.h:ba.mh}f=ba.href;at.show();if(ba.inline){a5().hide().insertBefore(a9(f)[0]).one(am,function(){a9(this).replaceWith(a0.children())});d(a9(f))}else{if(ba.iframe){a1.one(ac,function(){var g=a9("<iframe frameborder='0' style='width:100%; height:100%; border:0; display:block'/>")[0];g.name=a2+ +new Date;g.src=ba.href;if(!ba.scrolling){g.scrolling="no"}if(az){g.allowtransparency="true"}a9(g).appendTo(a0).one(am,function(){g.src="//about:blank"})});d(" ")}else{if(ba.html){d(ba.html)}else{if(ai(f)){e=new Image;e.onload=function(){var c;e.onload=null;e.id=a2+"Photo";a9(e).css({border:aR,display:"block",cssFloat:"left"});if(ba.scalePhotos){b=function(){e.height-=e.height*c;e.width-=e.width*c};if(ba.mw&&e.width>ba.mw){c=(e.width-ba.mw)/e.width;b()}if(ba.mh&&e.height>ba.mh){c=(e.height-ba.mh)/e.height;b()}}if(ba.h){e.style.marginTop=Math.max(ba.h-e.height,0)/2+"px"}a3[1]&&(a4<a3.length-1||ba.loop)&&a9(e).css({cursor:"pointer"}).click(a7.next);if(az){e.style.msInterpolationMode="bicubic"}setTimeout(function(){d(e)},1)};setTimeout(function(){e.src=f},1)}else{f&&au.load(f,function(h,i,g){d(i==="error"?"Request unsuccessful: "+g.statusText:a9(this).children())})}}}}};a7.next=function(){if(!aA){a4=a4<a3.length-1?a4+1:0;a7.load()}};a7.prev=function(){if(!aA){a4=a4?a4-1:a3.length-1;a7.load()}};a7.close=function(){if(aQ&&!ao){ao=a6;aQ=a8;aO(ap,ba.onCleanup);aX.unbind("."+a2+" ."+an);aN.fadeTo("fast",0);a1.stop().fadeTo("fast",0,function(){aO(am);a0.remove();a1.add(aN).css({opacity:1,cursor:aU}).hide();setTimeout(function(){ao=a8;aO(aa,ba.onClosed)},1)})}};a7.element=function(){return a9(aZ)};a7.settings=aG;a9(a7.init)})(jQuery,this);function initTopicAutocompleteForReclassifying(){var b=new TopicAutocomplete("#topic-autocomplete-input","#topic-autocomplete-suggestions");var d=$("#question .body-col ul.topic-list");var c=location.href;function a(){d.find(".remove").hide();$("#topic-autocomplete-input").hide();$(".add-topic").hide();$(".cancel-reclassify").hide();if(d.find("li").length==0){$(".reclassify .empty").show();$(".reclassify .not-empty").hide()}else{$(".reclassify .empty").hide();$(".reclassify .not-empty").show()}$(".retag").show()}function e(){d.find(".remove").show();$("#topic-autocomplete-input").show();$(".add-topic").show();$(".cancel-reclassify").show();$(".retag").hide()}a();$(".reclassify").click(function(){e();return false});$(".add-topic").live("click",function(){if(b.isActive){b.returnDefault()}return false});$(".cancel-reclassify").live("click",function(){a();return false});$("a.remove",d).live("click",function(){var f=$(this);$.getJSON(f.attr("href"),function(g){f.closest("li").remove()});return false});b.action=function(f){$.getJSON(c+"/classify?topic="+encodeURIComponent(f),function(g){if(g.success){d.find(".retag").before(g.box)}});b.clear()}}$(document).ready(function(){initTopicAutocompleteForReclassifying();$("#close_question_form").hide();$(".comments_wrapper").hide();$("input#question_title").focus();$(".modal .close").live("click",function(){$.colorbox.close();return false});$("#body").live("keyup",function(){var b=$(this);var a=b.val().length;var d=b.attr("maxlength");var c=$(".charsleft");if(a<d){c.html(d-a)}else{b.val(b.val().substr(0,d));c.html(0)}});Utils.clickObject(".share-question-widget input[type=submit]",function(){return{success:function(a){$.colorbox.close()},error:function(a){if(a.status=="needs_permission"){Utils.modal({html:a.html})}}}});Utils.clickObject("#sidebar .share .facebook,#sidebar .share .twitter",function(){return{success:function(a){Utils.modal({html:a.html})},error:function(a){if(a.status=="needs_connection"){Utils.modal({html:a.html})}}}});Utils.clickObject(".comment .comment-votes form.vote-up-comment-form input[name=vote_up]",function(){var a=$(this);var b=$(this).closest("form");a.hide();return{data:b.serialize()+"&"+a.attr("name")+"=1",success:function(c){if(c.vote_state=="deleted"){a.attr("src","/images/dialog-ok.png")}else{a.attr("src","/images/dialog-ok-apply.png")}a.parents(".comment-votes").children(".votes_average").html(c.average)},complete:function(){a.show()}}});Utils.clickObject("form.mainAnswerForm .button",function(){var b=$(this).parents("form");var c=$("#answers .hentry");var a=$(this);return{success:function(f){window.onbeforeunload=null;var e=$(f.html);var d=e.find(".entry-content");e.find(".comments_wrapper").hide();c.append(e);highlightEffect(e);$("#new-answer-wrapper").html(f.form_message);MathJax.Hub.Queue(["Typeset",MathJax.Hub,e[0]])},error:function(d){if(d.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}}});Utils.clickObject("form.commentForm .button",function(){var b=$(this).parents("form");var c=$(this).closest(".commentable").find(".comments");var a=$(this);return{success:function(e){var d=b.find("textarea");window.onbeforeunload=null;var f=$(e.html);c.append(f);c.closest(".commentable").find(".ccontrol").replaceWith(e.count);highlightEffect(f);d.val("");MathJax.Hub.Queue(["Typeset",MathJax.Hub,f[0]])},error:function(d){if(d.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}}});$(".edit_comment").live("click",function(){var b=$(this).parents(".comment");var a=$(this);a.hide();$.ajax({url:$(this).attr("href"),dataType:"json",type:"GET",data:{format:"js"},success:function(f){b=b.append(f.html);a.hide();var e=b.find("form.form");e.find(".cancel_edit_comment").click(function(){e.remove();a.show();return false});var d=e.find("input[type=submit]");var c=e.find("textarea");e.submit(function(){d.attr("disabled",true);$.ajax({url:e.attr("action"),dataType:"json",type:"PUT",data:e.serialize()+"&format=js",success:function(g,h){if(g.success){b.find(".markdown").html("<p>"+g.body+"</p>");e.remove();a.show();highlightEffect(b);showMessage(g.message,"notice");window.onbeforeunload=null}else{showMessage(g.message,"error");if(g.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}},error:manageAjaxError,complete:function(g,h){d.attr("disabled",false)}});return false})},error:manageAjaxError,complete:function(c,d){a.show()}});return false});$(".flag_form .cancel").live("click",function(){$("#question_flag_div").html("");return false});$(".answer .flag-link").live("click",function(){var b=$(this);var a=b.parents(".controls");$.ajax({url:$(this).attr("href"),dataType:"json",type:"GET",success:function(c){a.parents(".answer").find("#answer_flag_div").html(c.html);return false}});return false});$("#question_flag_link.flag-link").click(function(){$.ajax({url:$(this).attr("href"),dataType:"json",type:"GET",success:function(a){$("#question_flag_div").html(a.html);$("#request_close_question_form").slideUp();$("#close_question_form").slideUp();return false}});return false});$(".question-action").live("click",function(e){var d=$(this);if(!d.hasClass("busy")){d.addClass("busy");var c=d.attr("href");var g=d.attr("data-undo");var f=d.attr("title");var h=d.attr("data-title");var b=d.children("img");var a=$(d.attr("data-counter"));$.getJSON(c+".js",function(i){if(i.success){d.attr({href:g,"data-undo":c,title:h,"data-title":f});b.attr({src:b.attr("data-src"),"data-src":b.attr("src")});if(typeof(i.increment)!="undefined"){a.text(parseFloat($.trim(a.text()))+i.increment)}showMessage(i.message,"notice")}else{showMessage(i.message,"error");if(i.status=="unauthenticate"){window.onbeforeunload=null;window.location="/users/login"}}d.removeClass("busy")},"json")}return false});$(".ccontrol-link").live("click",function(){$(this).closest(".commentable").find(".comments_wrapper").slideToggle("slow");return false})});